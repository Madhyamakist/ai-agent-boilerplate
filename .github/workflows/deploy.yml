name: Deploy Python App to GCP E2 (Staging)

on:
  push:
    branches:
      - main
      - deploy   # change if you want a different branch for staging

jobs:
  deploy:
    runs-on: ubuntu-latest
    environment: deploy-staging   # matches the environment you created in GitHub

    steps:
      - uses: 'actions/checkout@v4' # Checkout your repository
      - uses: 'google-github-actions/auth@v2' # Authenticate to Google Cloud
        with:
          project_id: ${{ secrets.GCP_PROJECT }} # Replace with your actual GCP project ID
          credentials_json: ${{ secrets.GCP_SA_KEY }}
      - name: 'Run gcloud command'
        run: |
          gcloud compute instances list # Example gcloud command

   